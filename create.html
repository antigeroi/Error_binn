<!DOCTYPE html>
<html>
<head>
    <title>[+]</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{background:#0a0a0a;color:#d0d0d0;font-family:monospace;padding:12px}
        .h{display:flex;align-items:center;margin-bottom:15px}
        .b{color:#d0d0d0;font-size:18px;margin-right:8px;text-decoration:none}
        .t{color:#f00}
        .i,.ta{width:100%;padding:10px;margin-bottom:12px;background:#111;border:1px solid #333;color:#d0d0d0;font-family:inherit;border-radius:3px}
        .ta{min-height:70px;resize:vertical}
        .bt{width:100%;padding:10px;background:#0a0;color:#000;border:none;border-radius:3px;font-weight:bold;margin:4px 0;cursor:pointer}
        .bc{background:#333}
        .m{background:#f00;color:#000;padding:8px;border-radius:3px;margin-bottom:12px;display:none;text-align:center;font-size:12px}
        .ms{background:#0a0}
    </style>
</head>
<body>
    <div class="h">
        <a href="index.html" class="b">‚Üê</a>
        <div class="t">[+]</div>
    </div>
    
    <div class="m" id="msg"></div>
    
    <input type="text" class="i" id="li" placeholder="[ID]" maxlength="50">
    <textarea class="ta" id="va" placeholder="[VLD]" maxlength="300"></textarea>
    <textarea class="ta" id="co" placeholder="[CNT]"></textarea>
    
    <button class="bt" onclick="_x()">[SND]</button>
    <button class="bt bc" onclick="location.href='index.html'">[X]</button>

    <script>
        // üîí –ó–ê–®–ò–§–†–û–í–ê–ù–ù–´–ï –î–ê–ù–ù–´–ï
        const _1 = [
            'Njk1ODc5ZjJhZTU5NmU3MDhmYzEzZjU3',
            'JDJhJDEwJGxNM3dIV2Y1b2hFMWNKMEsvdG4wN2VWdWo3VzgwWmxqeGR3SlVhTkQvY0JPUWRLS3hwdFZD',
            'cGVuZGluZw=='
        ];
        
        // üîì –î–ï–ö–û–î–ï–†
        function _d() {
            try {
                return {
                    i: atob(_1[0]),
                    k: atob(_1[1]),
                    w: atob(_1[2])
                };
            } catch(e) {
                return { i: '', k: '', w: '' };
            }
        }
        
        // üì® –û–¢–ü–†–ê–í–ö–ê
        async function _x() {
            const li = document.getElementById('li').value.trim();
            const va = document.getElementById('va').value.trim();
            const co = document.getElementById('co').value.trim();
            
            if (!li || !va || !co) {
                _m('[ERR]', false);
                return;
            }
            
            _m('[...]', false);
            
            const btn = document.querySelector('.bt');
            const old = btn.textContent;
            btn.textContent = '[...]';
            btn.disabled = true;
            
            try {
                const d = _d();
                if (!d.i) throw new Error();
                
                // –ó–ê–ì–†–£–ó–ö–ê
                const res = await fetch(
                    `https://api.jsonbin.io/v3/b/${d.i}/latest`,
                    { headers: { 'X-Master-Key': d.k } }
                );
                
                if (!res.ok) throw new Error();
                const data = await res.json();
                const db = data.record;
                
                // –î–û–ë–ê–í–õ–ï–ù–ò–ï
                db.pastes.push({
                    id: Date.now(),
                    lika: li,
                    validation: va,
                    content: co,
                    author: 'u_' + Math.random().toString(36).substr(2, 4),
                    status: d.w,
                    tag: '',
                    date: new Date().toLocaleString('ru-RU')
                });
                
                // –°–û–•–†–ê–ù–ï–ù–ò–ï
                const save = await fetch(`https://api.jsonbin.io/v3/b/${d.i}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Master-Key': d.k,
                        'X-Bin-Versioning': 'false'
                    },
                    body: JSON.stringify(db)
                });
                
                if (save.ok) {
                    _m('[OK]', true);
                    
                    // –û–ß–ò–°–¢–ö–ê
                    ['li', 'va', 'co'].forEach(id => {
                        document.getElementById(id).value = '';
                    });
                    
                    setTimeout(() => {
                        location.href = 'index.html';
                    }, 1200);
                } else {
                    throw new Error();
                }
                
            } catch(e) {
                _m('[FAIL]', false);
                btn.textContent = old;
                btn.disabled = false;
            }
        }
        
        // üí¨ –°–û–û–ë–©–ï–ù–ò–ï
        function _m(txt, ok) {
            const m = document.getElementById('msg');
            m.textContent = txt;
            m.className = 'm' + (ok ? ' ms' : '');
            m.style.display = 'block';
            
            if (ok) {
                setTimeout(() => m.style.display = 'none', 2500);
            }
        }
        
        // üõ°Ô∏è –ó–ê–©–ò–¢–ê
        setInterval(() => {
            if (window.console && console.clear) {
                console.clear();
            }
        }, 300);
    </script>
</body>
</html>