<!DOCTYPE html>
<html>
<head>
    <title>Создать пасту</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body{background:#1a1a1a;color:white;font-family:Arial;padding:20px}
        .header{display:flex;align-items:center;margin-bottom:20px}
        .back-btn{color:white;text-decoration:none;font-size:20px;margin-right:10px}
        h1{color:red;margin:0}
        .form-group{margin-bottom:15px}
        input,textarea{width:100%;padding:12px;background:#3a3a3a;border:1px solid #4a4a4a;border-radius:8px;color:white;margin-top:5px}
        textarea{min-height:100px;resize:vertical}
        .btn{width:100%;padding:14px;border:none;border-radius:8px;font-weight:bold;margin-top:10px}
        .btn-submit{background:red;color:white}
        .btn-cancel{background:transparent;border:1px solid #888;color:#888}
    </style>
</head>
<body>
    <div class="header">
        <a href="index.html" class="back-btn">←</a>
        <h1>Создать пасту</h1>
    </div>

    <div class="form-group">
        <label>ЛИКА:</label>
        <input type="text" id="lika" placeholder="Кто сделал" maxlength="100">
    </div>

    <div class="form-group">
        <label>ВАЛИДАЦИЯ:</label>
        <textarea id="validation" placeholder="Цепочка валидации" maxlength="500"></textarea>
    </div>

    <div class="form-group">
        <label>ПАСТА:</label>
        <textarea id="content" placeholder="Информация"></textarea>
    </div>

    <button class="btn btn-submit" onclick="submitPaste()">Создать пасту</button>
    <button class="btn btn-cancel" onclick="window.location='index.html'">Отмена</button>

    <script>
        const DB_KEY = 'errorbin_all_users';
        
        function submitPaste() {
            const lika = document.getElementById('lika').value.trim();
            const validation = document.getElementById('validation').value.trim();
            const content = document.getElementById('content').value.trim();
            
            if(!lika || !validation || !content) {
                alert('Заполни все поля!');
                return;
            }
            
            // ЗАГРУЗИТЬ БАЗУ
            const db = JSON.parse(localStorage.getItem(DB_KEY) || '{"pastes":[]}');
            
            // ДОБАВИТЬ ПАСТУ
            db.pastes.push({
                id: Date.now(),
                lika: lika,
                validation: validation,
                content: content,
                author: 'user_' + Date.now().toString().slice(-6),
                status: 'pending',
                tag: '',
                date: new Date().toLocaleString()
            });
            
            // СОХРАНИТЬ
            localStorage.setItem(DB_KEY, JSON.stringify(db));
            
            alert('Паста отправлена на модерацию!');
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>